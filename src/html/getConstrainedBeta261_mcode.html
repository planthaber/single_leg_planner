<pre class="code">
<span class="srcline"><span class="lineno"><a href="96,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T4U3">beta</span>,<span class="var type1" id="S3T4U4">gamma</span>] = getConstrainedBeta(<span class="var type1" id="S4T4U7">panHeight</span>,<span class="mxinfo " id="T4:U4"><span class="mxinfo " id="T4:U5"><span class="var type1" id="S3T4U8">gamma</span></span></span>,<span class="var type1" id="S5T5U9">kC</span>,<span class="var type1" id="S6T17U10">range</span>,<span class="var type1" id="S7T4U11">min</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="96,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%GETCONSTRAINEDBETA Calculates the beta joint angle given a constrained body</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%height.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,5" id="srcline5"> 5</a></span><span class="line">    <span class="comment">%[L1,~,L3,L4,L5,L6,~,L8,zeta,~,~,~,~,~,~,~] = extractKinematicConstants(kinematicConst);</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%     check = (panHeight-kC.l1+kC.l4*sin(kC.zeta)+kC.l5*sin(gamma+kC.zeta)+kC.l7+kC.l8+kC.r)/kC.l3;</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="96,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%     if check &lt; -1 || check &gt; 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,10" id="srcline10">10</a></span><span class="line"><span class="comment">%         gammaMax = asin(1-abs(panHeight)+kC.l1-kC.l4*sin(kC.zeta)-kC.l7-kC.l8+kC.r)-kC.zeta;</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,11" id="srcline11">11</a></span><span class="line"><span class="comment">%         gammaMin = asin(-1-abs(panHeight)+kC.l1-kC.l4*sin(kC.zeta)-kC.l7-kC.l8+kC.r)-kC.zeta;</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,12" id="srcline12">12</a></span><span class="line"><span class="comment">%         gamma = gammaMin + rand*(gammaMax-gammaMin);</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,13" id="srcline13">13</a></span><span class="line"><span class="comment">%     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,14" id="srcline14">14</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T4:U10"><span class="var type1" id="S8T4U14">check</span> = <span class="mxinfo " id="T4:U12">(<span class="mxinfo " id="T4:U13"><span class="mxinfo " id="T4:U14"><span class="mxinfo " id="T4:U15"><span class="mxinfo " id="T4:U16"><span class="mxinfo " id="T4:U17"><span class="mxinfo " id="T4:U18"><span class="mxinfo " id="T4:U19">-<span class="var type1" id="S4T4U24">panHeight</span></span>+<span class="mxinfo " id="T4:U21"><span class="var type1" id="S5T5U26">kC</span>.l1</span></span>-<span class="mxinfo " id="T4:U23"><span class="mxinfo " id="T4:U24"><span class="var type1" id="S5T5U30">kC</span>.l4</span>*<span class="mxinfo " id="T4:U26">sin(<span class="mxinfo " id="T4:U27"><span class="var type1" id="S5T5U35">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T4:U29"><span class="mxinfo " id="T4:U30"><span class="var type1" id="S5T5U39">kC</span>.l5</span>*<span class="mxinfo " id="T4:U32">sin(<span class="mxinfo " id="T4:U33"><span class="var type1" id="S3T4U44">gamma</span>+<span class="mxinfo " id="T4:U35"><span class="var type1" id="S5T5U46">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T4:U37"><span class="var type1" id="S5T5U49">kC</span>.l6</span></span>-<span class="mxinfo " id="T4:U39"><span class="var type1" id="S5T5U52">kC</span>.l8</span></span>-<span class="mxinfo " id="T4:U41"><span class="var type1" id="S5T5U55">kC</span>.r</span></span>)/<span class="mxinfo " id="T4:U43"><span class="var type1" id="S5T5U58">kC</span>.l3</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,16" id="srcline16">16</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo " id="T4:U45"><span class="var type1" id="S10T4U62">count</span> = <span class="mxinfo " id="T4:U47">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">while</span> <span class="mxinfo " id="T1:U48"><span class="var type1" id="S8T4U67">check</span> &lt; <span class="mxinfo " id="T4:U50">-<span class="mxinfo " id="T4:U51">1</span></span></span> || <span class="mxinfo " id="T1:U52"><span class="var type1" id="S8T4U71">check</span> &gt; <span class="mxinfo " id="T4:U54">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="96,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T4:U55"><span class="var type1" id="S3T4U75">gamma</span> = <span class="mxinfo " id="T4:U57"><span class="mxinfo " id="T4:U58"><span class="mxinfo " id="T4:U59"><span class="var type1" id="S6T17U79">range</span>(<span class="mxinfo " id="T4:U61">2</span>)</span>*<span class="mxinfo " id="T4:U62">rand</span></span>+<span class="var type1" id="S7T4U83">min</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,20" id="srcline20">20</a></span><span class="line">        <span class="mxinfo " id="T4:U64"><span class="var type1" id="S8T4U86">check</span> = <span class="mxinfo " id="T4:U66">(<span class="mxinfo " id="T4:U67"><span class="mxinfo " id="T4:U68"><span class="mxinfo " id="T4:U69"><span class="mxinfo " id="T4:U70"><span class="mxinfo " id="T4:U71"><span class="mxinfo " id="T4:U72"><span class="mxinfo " id="T4:U73">-<span class="var type1" id="S4T4U96">panHeight</span></span>+<span class="mxinfo " id="T4:U75"><span class="var type1" id="S5T5U98">kC</span>.l1</span></span>-<span class="mxinfo " id="T4:U77"><span class="mxinfo " id="T4:U78"><span class="var type1" id="S5T5U102">kC</span>.l4</span>*<span class="mxinfo " id="T4:U80">sin(<span class="mxinfo " id="T4:U81"><span class="var type1" id="S5T5U107">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T4:U83"><span class="mxinfo " id="T4:U84"><span class="var type1" id="S5T5U111">kC</span>.l5</span>*<span class="mxinfo " id="T4:U86">sin(<span class="mxinfo " id="T4:U87"><span class="var type1" id="S3T4U116">gamma</span>+<span class="mxinfo " id="T4:U89"><span class="var type1" id="S5T5U118">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T4:U91"><span class="var type1" id="S5T5U121">kC</span>.l6</span></span>-<span class="mxinfo " id="T4:U93"><span class="var type1" id="S5T5U124">kC</span>.l8</span></span>-<span class="mxinfo " id="T4:U95"><span class="var type1" id="S5T5U127">kC</span>.r</span></span>)/<span class="mxinfo " id="T4:U97"><span class="var type1" id="S5T5U130">kC</span>.l3</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,21" id="srcline21">21</a></span><span class="line">        <span class="comment">%disp('Imaginary');</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,22" id="srcline22">22</a></span><span class="line">        <span class="comment">%disp(count);</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,23" id="srcline23">23</a></span><span class="line">        <span class="mxinfo " id="T4:U99"><span class="var type1" id="S10T4U134">count</span> = <span class="mxinfo " id="T4:U101"><span class="var type1" id="S10T4U136">count</span> + <span class="mxinfo " id="T4:U103">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,24" id="srcline24">24</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,25" id="srcline25">25</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T4:U104"><span class="var type1" id="S2T4U140">beta</span> = <span class="mxinfo " id="T4:U106">asin(<span class="var type1" id="S8T4U143">check</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,27" id="srcline27">27</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,28" id="srcline28">28</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
