<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S58T61U515">pathC</span>,<span class="var type1" id="S59T61U516">pathJ</span>] = transformPath(<span class="var type1" id="S60T48U519">pathOld</span>,<span class="var type1" id="S61T7U520">NODE_SIZE</span>,<span class="var type1" id="S62T5U521">kC</span>,<span class="var type1" id="S63T4U522">dt</span>,<span class="var type1" id="S64T4U523">Dt</span>,<span class="var type1" id="S65T8U524">TP2B</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line">    <span class="comment">%Take the pathOld array and combine the general nodes and intermediate</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line">    <span class="comment">%states into a uniform path. The output path should be a npx6 array</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line">    <span class="comment">%that contains the n general nodes and the p intermediate nodes between</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line">    <span class="comment">%general nodes. Each row in the path matrix contains </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line">    <span class="comment">%[t,x,y,z,xDot,yDot,zDot] state data.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line">    <span class="mxinfo " id="T4:U9">[<span class="var type1" id="S66T4U528">pathH</span>,<span class="var type1" id="S67T4U529">pathW</span>] = size(<span class="var type1" id="S60T48U532">pathOld</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line">    <span class="mxinfo " id="T61:U13"><span class="var type1" id="S58T61U535">pathC</span> = <span class="mxinfo " id="T61:U15">zeros(<span class="mxinfo " id="T4:U16"><span class="mxinfo " id="T4:U17">round(<span class="mxinfo " id="T4:U18"><span class="var type1" id="S64T4U542">Dt</span>/<span class="var type1" id="S63T4U543">dt</span></span>)</span>*<span class="var type1" id="S66T4U544">pathH</span></span>,<span class="mxinfo " id="T4:U22">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line">    <span class="mxinfo " id="T61:U23"><span class="var type1" id="S59T61U548">pathJ</span> = <span class="mxinfo " id="T61:U25">zeros(<span class="mxinfo " id="T4:U26"><span class="mxinfo " id="T4:U27">round(<span class="mxinfo " id="T4:U28"><span class="var type1" id="S64T4U555">Dt</span>/<span class="var type1" id="S63T4U556">dt</span></span>)</span>*<span class="var type1" id="S66T4U557">pathH</span></span>,<span class="mxinfo " id="T4:U32">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line">    <span class="mxinfo " id="T4:U33"><span class="var type1" id="S71T4U561">count</span> = <span class="mxinfo " id="T4:U35">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line">    <span class="mxinfo " id="T4:U36"><span class="var type1" id="S72T4U565">time</span> = <span class="mxinfo " id="T4:U38"><span class="mxinfo " id="T4:U39"><span class="mxinfo " id="T4:U40">round(<span class="mxinfo " id="T4:U41"><span class="var type1" id="S64T4U571">Dt</span>/<span class="var type1" id="S63T4U572">dt</span></span>)</span>*<span class="var type1" id="S66T4U573">pathH</span></span>*<span class="var type1" id="S63T4U574">dt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S73T4U577">i</span> = <span class="mxinfo " id="T4:U47">1</span>:<span class="var type1" id="S66T4U580">pathH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S74T7U583">j</span> = <span class="var type1" id="S67T4U586">pathW</span>:<span class="mxinfo " id="T7:U51">-6</span>:<span class="mxinfo " id="T7:U52"><span class="var type1" id="S61T7U590">NODE_SIZE</span>+<span class="mxinfo " id="T7:U54">7</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line">            <span class="mxinfo " id="T45:U55"><span class="var type1" id="S75T45U594">uP</span> = <span class="mxinfo " id="T45:U57"><span class="fcn" id="F337N25:B596">sherpaTTFK</span>(<span class="mxinfo " id="T45:U58"><span class="var type1" id="S60T48U598">pathOld</span>(<span class="var type1" id="S73T4U599">i</span>,<span class="mxinfo " id="T82:U61"><span class="mxinfo " id="T7:U62"><span class="var type1" id="S74T7U602">j</span>-5</span>:<span class="mxinfo " id="T7:U64"><span class="var type1" id="S74T7U605">j</span>-3</span></span>)</span>,<span class="var type1" id="S62T5U607">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line">            <span class="mxinfo " id="T10:U67"><span class="var type1" id="S77T10U610">uB</span> = <span class="mxinfo " id="T10:U69"><span class="mxinfo " id="T10:U70"><span class="mxinfo " id="T9:U71"><span class="var type1" id="S65T8U614">TP2B</span>(<span class="mxinfo " id="T45:U73"><span class="mxinfo " id="T4:U74">1</span>:<span class="mxinfo " id="T4:U75">3</span></span>,<span class="mxinfo " id="T45:U76"><span class="mxinfo " id="T4:U77">1</span>:<span class="mxinfo " id="T4:U78">3</span></span>)</span>*<span class="mxinfo " id="T10:U79"><span class="var type1" id="S75T45U622">uP</span>'</span></span> + <span class="mxinfo " id="T10:U81"><span class="var type1" id="S65T8U624">TP2B</span>(<span class="mxinfo " id="T45:U83"><span class="mxinfo " id="T4:U84">1</span>:<span class="mxinfo " id="T4:U85">3</span></span>,<span class="mxinfo " id="T4:U86">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line">            <span class="mxinfo " id="T10:U87"><span class="var type1" id="S78T10U631">uDot</span> = <span class="mxinfo " id="T10:U89"><span class="fcn" id="F338N26:B633">sherpaTTFKVel</span>(<span class="mxinfo " id="T10:U90"><span class="mxinfo " id="T45:U91"><span class="var type1" id="S60T48U636">pathOld</span>(<span class="var type1" id="S73T4U637">i</span>,<span class="mxinfo " id="T82:U94"><span class="mxinfo " id="T7:U95"><span class="var type1" id="S74T7U640">j</span>-2</span>:<span class="var type1" id="S74T7U642">j</span></span>)</span>'</span>,<span class="mxinfo " id="T10:U98"><span class="mxinfo " id="T45:U99"><span class="var type1" id="S60T48U645">pathOld</span>(<span class="var type1" id="S73T4U646">i</span>,<span class="mxinfo " id="T82:U102"><span class="mxinfo " id="T7:U103"><span class="var type1" id="S74T7U649">j</span>-5</span>:<span class="mxinfo " id="T7:U105"><span class="var type1" id="S74T7U652">j</span>-3</span></span>)</span>'</span>,<span class="var type1" id="S62T5U654">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line">            <span class="mxinfo " id="T10:U108"><span class="var type1" id="S80T10U657">uBDot</span> = <span class="mxinfo " id="T10:U110"><span class="mxinfo " id="T9:U111"><span class="var type1" id="S65T8U660">TP2B</span>(<span class="mxinfo " id="T45:U113"><span class="mxinfo " id="T4:U114">1</span>:<span class="mxinfo " id="T4:U115">3</span></span>,<span class="mxinfo " id="T45:U116"><span class="mxinfo " id="T4:U117">1</span>:<span class="mxinfo " id="T4:U118">3</span></span>)</span>*<span class="var type1" id="S78T10U667">uDot</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line">            <span class="mxinfo " id="T75:U120"><span class="mxinfo " id="T75:U121"><span class="var type1" id="S58T61U671">pathC</span>(<span class="var type1" id="S71T4U672">count</span>,:)</span> = <span class="mxinfo " id="T75:U124">[<span class="var type1" id="S72T4U676">time</span> <span class="mxinfo " id="T45:U126"><span class="var type1" id="S77T10U678">uB</span>'</span> <span class="mxinfo " id="T45:U128"><span class="var type1" id="S80T10U680">uBDot</span>'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line">            <span class="mxinfo " id="T75:U130"><span class="mxinfo " id="T75:U131"><span class="var type1" id="S59T61U684">pathJ</span>(<span class="var type1" id="S71T4U685">count</span>,:)</span> = <span class="mxinfo " id="T75:U134">[<span class="var type1" id="S72T4U689">time</span> <span class="mxinfo " id="T17:U136"><span class="var type1" id="S60T48U691">pathOld</span>(<span class="var type1" id="S73T4U692">i</span>,<span class="mxinfo " id="T83:U139"><span class="mxinfo " id="T7:U140"><span class="var type1" id="S74T7U695">j</span>-5</span>:<span class="var type1" id="S74T7U697">j</span></span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line">            <span class="mxinfo " id="T4:U143"><span class="var type1" id="S72T4U700">time</span> = <span class="mxinfo " id="T4:U145"><span class="var type1" id="S72T4U702">time</span> - <span class="var type1" id="S63T4U703">dt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line">            <span class="mxinfo " id="T4:U148"><span class="var type1" id="S71T4U706">count</span> = <span class="mxinfo " id="T4:U150"><span class="var type1" id="S71T4U708">count</span> + <span class="mxinfo " id="T4:U152">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line">    <span class="mxinfo " id="T61:U153"><span class="var type1" id="S58T61U712">pathC</span> = <span class="mxinfo " id="T61:U155">flipud(<span class="mxinfo " id="T61:U156"><span class="var type1" id="S58T61U716">pathC</span>(:,<span class="mxinfo " id="T75:U158"><span class="mxinfo " id="T4:U159">1</span>:<span class="mxinfo " id="T4:U160">end</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line">    <span class="mxinfo " id="T61:U161"><span class="var type1" id="S59T61U724">pathJ</span> = <span class="mxinfo " id="T61:U163">flipud(<span class="mxinfo " id="T61:U164"><span class="var type1" id="S59T61U728">pathJ</span>(:,<span class="mxinfo " id="T75:U166"><span class="mxinfo " id="T4:U167">1</span>:<span class="mxinfo " id="T4:U168">end</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
