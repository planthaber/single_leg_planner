<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S64T64U510">pathC</span>,<span class="var type1" id="S65T64U511">pathJ</span>] = transformPath(<span class="var type1" id="S66T49U514">pathOld</span>,<span class="var type1" id="S67T9U515">NODE_SIZE</span>,<span class="var type1" id="S68T6U516">kC</span>,<span class="var type1" id="S69T4U517">dt</span>,<span class="var type1" id="S70T4U518">Dt</span>,<span class="var type1" id="S71T10U519">TP2B</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">    <span class="comment">%Take the pathOld array and combine the general nodes and intermediate</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line">    <span class="comment">%states into a uniform path. The output path should be a npx6 array</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line">    <span class="comment">%that contains the n general nodes and the p intermediate nodes between</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line">    <span class="comment">%general nodes. Each row in the path matrix contains </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line">    <span class="comment">%[t,x,y,z,xDot,yDot,zDot] state data.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line">    <span class="mxinfo " id="T4:U9">[<span class="var type1" id="S72T4U523">pathH</span>,<span class="var type1" id="S73T4U524">pathW</span>] = size(<span class="var type1" id="S66T49U527">pathOld</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line">    <span class="mxinfo " id="T64:U13"><span class="var type1" id="S64T64U530">pathC</span> = <span class="mxinfo " id="T64:U15">zeros(<span class="mxinfo " id="T4:U16"><span class="mxinfo " id="T4:U17">round(<span class="mxinfo " id="T4:U18"><span class="var type1" id="S70T4U537">Dt</span>/<span class="var type1" id="S69T4U538">dt</span></span>)</span>*<span class="var type1" id="S72T4U539">pathH</span></span>,<span class="mxinfo " id="T4:U22">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line">    <span class="mxinfo " id="T64:U23"><span class="var type1" id="S65T64U543">pathJ</span> = <span class="mxinfo " id="T64:U25">zeros(<span class="mxinfo " id="T4:U26"><span class="mxinfo " id="T4:U27">round(<span class="mxinfo " id="T4:U28"><span class="var type1" id="S70T4U550">Dt</span>/<span class="var type1" id="S69T4U551">dt</span></span>)</span>*<span class="var type1" id="S72T4U552">pathH</span></span>,<span class="mxinfo " id="T4:U32">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line">    <span class="mxinfo " id="T4:U33"><span class="var type1" id="S77T4U556">count</span> = <span class="mxinfo " id="T4:U35">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line">    <span class="mxinfo " id="T4:U36"><span class="var type1" id="S78T4U560">time</span> = <span class="mxinfo " id="T4:U38"><span class="mxinfo " id="T4:U39"><span class="mxinfo " id="T4:U40">round(<span class="mxinfo " id="T4:U41"><span class="var type1" id="S70T4U566">Dt</span>/<span class="var type1" id="S69T4U567">dt</span></span>)</span>*<span class="var type1" id="S72T4U568">pathH</span></span>*<span class="var type1" id="S69T4U569">dt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S79T4U572">i</span> = <span class="mxinfo " id="T4:U47">1</span>:<span class="var type1" id="S72T4U575">pathH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S80T9U578">j</span> = <span class="var type1" id="S73T4U581">pathW</span>:<span class="mxinfo " id="T9:U51">-6</span>:<span class="mxinfo " id="T9:U52"><span class="var type1" id="S67T9U585">NODE_SIZE</span>+<span class="mxinfo " id="T9:U54">7</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line">            <span class="mxinfo " id="T8:U55"><span class="var type1" id="S81T8U589">uP</span> = <span class="mxinfo " id="T8:U57"><span class="fcn" id="F14N24:B591">sherpaTTFK</span>(<span class="mxinfo " id="T8:U58"><span class="var type1" id="S66T49U593">pathOld</span>(<span class="var type1" id="S79T4U594">i</span>,<span class="mxinfo " id="T88:U61"><span class="mxinfo " id="T9:U62"><span class="var type1" id="S80T9U597">j</span>-5</span>:<span class="mxinfo " id="T9:U64"><span class="var type1" id="S80T9U600">j</span>-3</span></span>)</span>,<span class="var type1" id="S68T6U602">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line">            <span class="mxinfo " id="T12:U67"><span class="var type1" id="S83T12U605">uB</span> = <span class="mxinfo " id="T12:U69"><span class="mxinfo " id="T12:U70"><span class="mxinfo " id="T11:U71"><span class="var type1" id="S71T10U609">TP2B</span>(<span class="mxinfo " id="T8:U73"><span class="mxinfo " id="T4:U74">1</span>:<span class="mxinfo " id="T4:U75">3</span></span>,<span class="mxinfo " id="T8:U76"><span class="mxinfo " id="T4:U77">1</span>:<span class="mxinfo " id="T4:U78">3</span></span>)</span>*<span class="mxinfo " id="T12:U79"><span class="var type1" id="S81T8U617">uP</span>'</span></span> + <span class="mxinfo " id="T12:U81"><span class="var type1" id="S71T10U619">TP2B</span>(<span class="mxinfo " id="T8:U83"><span class="mxinfo " id="T4:U84">1</span>:<span class="mxinfo " id="T4:U85">3</span></span>,<span class="mxinfo " id="T4:U86">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line">            <span class="mxinfo " id="T12:U87"><span class="var type1" id="S84T12U626">uDot</span> = <span class="mxinfo " id="T12:U89"><span class="fcn" id="F408N25:B628">sherpaTTFKVel</span>(<span class="mxinfo " id="T12:U90"><span class="mxinfo " id="T8:U91"><span class="var type1" id="S66T49U631">pathOld</span>(<span class="var type1" id="S79T4U632">i</span>,<span class="mxinfo " id="T88:U94"><span class="mxinfo " id="T9:U95"><span class="var type1" id="S80T9U635">j</span>-2</span>:<span class="var type1" id="S80T9U637">j</span></span>)</span>'</span>,<span class="mxinfo " id="T12:U98"><span class="mxinfo " id="T8:U99"><span class="var type1" id="S66T49U640">pathOld</span>(<span class="var type1" id="S79T4U641">i</span>,<span class="mxinfo " id="T88:U102"><span class="mxinfo " id="T9:U103"><span class="var type1" id="S80T9U644">j</span>-5</span>:<span class="mxinfo " id="T9:U105"><span class="var type1" id="S80T9U647">j</span>-3</span></span>)</span>'</span>,<span class="var type1" id="S68T6U649">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line">            <span class="mxinfo " id="T12:U108"><span class="var type1" id="S86T12U652">uBDot</span> = <span class="mxinfo " id="T12:U110"><span class="mxinfo " id="T11:U111"><span class="var type1" id="S71T10U655">TP2B</span>(<span class="mxinfo " id="T8:U113"><span class="mxinfo " id="T4:U114">1</span>:<span class="mxinfo " id="T4:U115">3</span></span>,<span class="mxinfo " id="T8:U116"><span class="mxinfo " id="T4:U117">1</span>:<span class="mxinfo " id="T4:U118">3</span></span>)</span>*<span class="var type1" id="S84T12U662">uDot</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line">            <span class="mxinfo " id="T78:U120"><span class="mxinfo " id="T78:U121"><span class="var type1" id="S64T64U666">pathC</span>(<span class="var type1" id="S77T4U667">count</span>,:)</span> = <span class="mxinfo " id="T78:U124">[<span class="var type1" id="S78T4U671">time</span> <span class="mxinfo " id="T8:U126"><span class="var type1" id="S83T12U673">uB</span>'</span> <span class="mxinfo " id="T8:U128"><span class="var type1" id="S86T12U675">uBDot</span>'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line">            <span class="mxinfo " id="T78:U130"><span class="mxinfo " id="T78:U131"><span class="var type1" id="S65T64U679">pathJ</span>(<span class="var type1" id="S77T4U680">count</span>,:)</span> = <span class="mxinfo " id="T78:U134">[<span class="var type1" id="S78T4U684">time</span> <span class="mxinfo " id="T19:U136"><span class="var type1" id="S66T49U686">pathOld</span>(<span class="var type1" id="S79T4U687">i</span>,<span class="mxinfo " id="T89:U139"><span class="mxinfo " id="T9:U140"><span class="var type1" id="S80T9U690">j</span>-5</span>:<span class="var type1" id="S80T9U692">j</span></span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line">            <span class="mxinfo " id="T4:U143"><span class="var type1" id="S78T4U695">time</span> = <span class="mxinfo " id="T4:U145"><span class="var type1" id="S78T4U697">time</span> - <span class="var type1" id="S69T4U698">dt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line">            <span class="mxinfo " id="T4:U148"><span class="var type1" id="S77T4U701">count</span> = <span class="mxinfo " id="T4:U150"><span class="var type1" id="S77T4U703">count</span> + <span class="mxinfo " id="T4:U152">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,144" id="srcline144">144</a></span><span class="line">    <span class="mxinfo " id="T64:U153"><span class="var type1" id="S64T64U707">pathC</span> = <span class="mxinfo " id="T64:U155">flipud(<span class="mxinfo " id="T64:U156"><span class="var type1" id="S64T64U711">pathC</span>(:,<span class="mxinfo " id="T78:U158"><span class="mxinfo " id="T4:U159">1</span>:<span class="mxinfo " id="T4:U160">end</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,145" id="srcline145">145</a></span><span class="line">    <span class="mxinfo " id="T64:U161"><span class="var type1" id="S65T64U719">pathJ</span> = <span class="mxinfo " id="T64:U163">flipud(<span class="mxinfo " id="T64:U164"><span class="var type1" id="S65T64U723">pathJ</span>(:,<span class="mxinfo " id="T78:U166"><span class="mxinfo " id="T4:U167">1</span>:<span class="mxinfo " id="T4:U168">end</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,146" id="srcline146">146</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,147" id="srcline147">147</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
