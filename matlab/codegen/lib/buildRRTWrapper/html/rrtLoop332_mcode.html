<pre class="code">
<span class="srcline"><span class="lineno"><a href="123,56" id="srcline56">56</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="123,57" id="srcline57">57</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S35T63U231">T</span>,<span class="var type1" id="S36T4U232">nodeIDCount</span>] = rrtLoop(<span class="mxinfo " id="T63:U3"><span class="mxinfo " id="T63:U4"><span class="var type1" id="S35T63U235">T</span></span></span>,<span class="var type1" id="S37T16U236">jointRange</span>,<span class="var type1" id="S38T17U237">jointLimits</span>,<span class="var type1" id="S39T5U238">kinematicConst</span>,<span class="var type1" id="S40T4U239">panHeight</span>,<span class="var type1" id="S41T46U240">U</span>,<span class="var type1" id="S42T4U241">Dt</span>,<span class="var type1" id="S43T4U242">dt</span>,<span class="var type1" id="S44T6U243">NODE_SIZE</span>,<span class="var type1" id="S45T6U244">U_SIZE</span>,<span class="var type1" id="S46T44U245">HGAINS</span>,<span class="var type1" id="S47T4U246">ankleThreshold</span>,<span class="mxinfo " id="T4:U17"><span class="mxinfo " id="T4:U18"><span class="var type1" id="S36T4U247">nodeIDCount</span></span></span>,<span class="var type1" id="S48T45U248">nGoal</span>,<span class="var type1" id="S49T6U249">goalSeedFreq</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="123,58" id="srcline58">58</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="123,59" id="srcline59">59</a></span><span class="line">    <span class="mxinfo " id="T67:U22"><span class="var type1" id="S50T67U252">xRand</span> = <span class="mxinfo " id="T67:U24"><span class="fcn" id="F282N22:B254">randomState</span>(<span class="var type1" id="S37T16U255">jointRange</span>,<span class="mxinfo " id="T16:U26"><span class="var type1" id="S38T17U257">jointLimits</span>(<span class="mxinfo " id="T4:U28">1</span>,:)</span>,<span class="var type1" id="S39T5U260">kinematicConst</span>,<span class="var type1" id="S40T4U261">panHeight</span>,<span class="var type1" id="S48T45U262">nGoal</span>,<span class="var type1" id="S36T4U263">nodeIDCount</span>,<span class="mxinfo " id="T6:U33"><span class="var type1" id="S49T6U264">goalSeedFreq</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="123,60" id="srcline60">60</a></span><span class="line">    [<span class="mxinfo " id="T66:U35"><span class="var type1" id="S52T66U268">xNear</span></span>,<span class="mxinfo " id="T4:U37"><span class="mxinfo " id="T4:U38">~</span></span>,<span class="mxinfo " id="T4:U39"><span class="mxinfo " id="T4:U40">~</span></span>] = <span class="fcn" id="F305N21:B272">nearestNeighbour</span>(<span class="var type1" id="S50T67U273">xRand</span>,<span class="var type1" id="S35T63U274">T</span>,<span class="var type1" id="S46T44U275">HGAINS</span>,<span class="var type1" id="S38T17U276">jointLimits</span>,<span class="var type1" id="S39T5U277">kinematicConst</span>,<span class="var type1" id="S36T4U278">nodeIDCount</span>,<span class="mxinfo " id="T6:U47"><span class="var type1" id="S44T6U279">NODE_SIZE</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="123,61" id="srcline61">61</a></span><span class="line">    [<span class="mxinfo " id="T66:U49"><span class="var type1" id="S54T66U283">xNew</span></span>,<span class="mxinfo " id="T56:U51"><span class="var type1" id="S55T56U284">transitionArray</span></span>]  = <span class="fcn" id="F331N25:B286">selectInput</span>(<span class="var type1" id="S52T66U287">xNear</span>,<span class="var type1" id="S50T67U288">xRand</span>,<span class="var type1" id="S41T46U289">U</span>,<span class="var type1" id="S43T4U290">dt</span>,<span class="var type1" id="S42T4U291">Dt</span>,<span class="mxinfo " id="T6:U58"><span class="var type1" id="S44T6U292">NODE_SIZE</span></span>,<span class="mxinfo " id="T6:U60"><span class="var type1" id="S45T6U293">U_SIZE</span></span>,<span class="var type1" id="S46T44U294">HGAINS</span>,<span class="var type1" id="S39T5U295">kinematicConst</span>,<span class="mxinfo " id="T4:U64"><span class="var type1" id="S47T4U296">ankleThreshold</span></span>,<span class="var type1" id="S38T17U297">jointLimits</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="123,62" id="srcline62">62</a></span><span class="line">    <span class="mxinfo " id="T4:U67"><span class="var type1" id="S36T4U300">nodeIDCount</span> = <span class="mxinfo " id="T4:U69"><span class="var type1" id="S36T4U302">nodeIDCount</span> + <span class="mxinfo " id="T4:U71">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="123,63" id="srcline63">63</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="123,64" id="srcline64">64</a></span><span class="line">    <span class="mxinfo " id="T4:U72"><span class="mxinfo " id="T4:U73"><span class="var type1" id="S54T66U307">xNew</span>(<span class="mxinfo " id="T4:U75">1</span>)</span> = <span class="var type1" id="S36T4U309">nodeIDCount</span></span>;                                  <span class="comment">%Node ID</span></span></span>
<span class="srcline"><span class="lineno"><a href="123,65" id="srcline65">65</a></span><span class="line">    <span class="mxinfo " id="T4:U77"><span class="mxinfo " id="T4:U78"><span class="var type1" id="S54T66U313">xNew</span>(<span class="mxinfo " id="T4:U80">2</span>)</span> = <span class="mxinfo " id="T4:U81"><span class="var type1" id="S52T66U316">xNear</span>(<span class="mxinfo " id="T4:U83">1</span>)</span></span>;                                     <span class="comment">%Parent ID</span></span></span>
<span class="srcline"><span class="lineno"><a href="123,66" id="srcline66">66</a></span><span class="line">    <span class="mxinfo " id="T4:U84"><span class="mxinfo " id="T4:U85"><span class="var type1" id="S54T66U321">xNew</span>(<span class="mxinfo " id="T4:U87">3</span>)</span> = <span class="mxinfo " id="T4:U88"><span class="fcn" id="F287N17:B324">heuristicSingleLeg</span>(<span class="var type1" id="S54T66U325">xNew</span>,<span class="var type1" id="S52T66U326">xNear</span>,<span class="var type1" id="S46T44U327">HGAINS</span>,<span class="var type1" id="S38T17U328">jointLimits</span>,<span class="var type1" id="S39T5U329">kinematicConst</span>)</span></span>;           <span class="comment">%Cost</span></span></span>
<span class="srcline"><span class="lineno"><a href="123,67" id="srcline67">67</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="123,68" id="srcline68">68</a></span><span class="line">    <span class="mxinfo " id="T56:U94"><span class="mxinfo " id="T56:U95"><span class="var type1" id="S35T63U333">T</span>(<span class="var type1" id="S36T4U334">nodeIDCount</span>,:)</span> = <span class="mxinfo " id="T56:U98">[<span class="var type1" id="S54T66U338">xNew</span> <span class="var type1" id="S55T56U339">transitionArray</span>]</span></span>;                                <span class="comment">%Append the new node to the tree.    </span></span></span>
<span class="srcline"><span class="lineno"><a href="123,69" id="srcline69">69</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T1:U101"><span class="mxinfo " id="T4:U102">mod(<span class="var type1" id="S36T4U345">nodeIDCount</span>,<span class="mxinfo " id="T4:U104">100</span>)</span> == <span class="mxinfo " id="T4:U105">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="123,70" id="srcline70">70</a></span><span class="line">        <span class="comment">%fprintf('PROGRESS STATUS: %.0f NODES USED\n',nodeIDCount);</span></span></span>
<span class="srcline"><span class="lineno"><a href="123,71" id="srcline71">71</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="123,72" id="srcline72">72</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="123,73" id="srcline73">73</a></span><span class="line"></span></span>
</pre>
