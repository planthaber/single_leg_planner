<pre class="code">
<span class="srcline"><span class="lineno"><a href="120,70" id="srcline70">70</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="120,71" id="srcline71">71</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S44T50U291">T</span>,<span class="var type1" id="S45T4U292">nodeIDCount</span>] = rrtLoop(<span class="mxinfo " id="T50:U3"><span class="mxinfo " id="T50:U4"><span class="var type1" id="S44T50U295">T</span></span></span>,<span class="var type1" id="S46T20U296">jointLimits</span>,<span class="var type1" id="S47T6U297">cartesianLimits</span>,<span class="var type1" id="S48T5U298">kC</span>,<span class="var type1" id="S49T4U299">panHeight</span>,<span class="var type1" id="S50T48U300">U</span>,<span class="var type1" id="S51T4U301">Dt</span>,<span class="var type1" id="S52T4U302">dt</span>,<span class="var type1" id="S53T7U303">NODE_SIZE</span>,<span class="var type1" id="S54T7U304">U_SIZE</span>,<span class="var type1" id="S55T45U305">HGAINS</span>,<span class="var type1" id="S56T4U306">ankleThreshold</span>,<span class="mxinfo " id="T4:U17"><span class="mxinfo " id="T4:U18"><span class="var type1" id="S45T4U307">nodeIDCount</span></span></span>,<span class="var type1" id="S57T47U308">nGoal</span>,<span class="var type1" id="S58T7U309">goalSeedFreq</span>,<span class="var type1" id="S59T49U310">uBDot</span>,<span class="var type1" id="S60T7U311">legNum</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="120,72" id="srcline72">72</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="120,73" id="srcline73">73</a></span><span class="line">    <span class="mxinfo " id="T47:U24"><span class="var type1" id="S61T47U314">xRand</span> = <span class="mxinfo " id="T47:U26"><span class="fcn" id="F233N24:B316">randomState</span>(<span class="var type1" id="S46T20U317">jointLimits</span>,<span class="var type1" id="S47T6U318">cartesianLimits</span>,<span class="var type1" id="S49T4U319">panHeight</span>,<span class="var type1" id="S57T47U320">nGoal</span>,<span class="var type1" id="S45T4U321">nodeIDCount</span>,<span class="mxinfo " id="T7:U32"><span class="var type1" id="S58T7U322">goalSeedFreq</span></span>,<span class="var type1" id="S48T5U323">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="120,74" id="srcline74">74</a></span><span class="line">    [<span class="mxinfo " id="T67:U35"><span class="var type1" id="S63T67U327">xNear</span></span>,<span class="mxinfo " id="T4:U37"><span class="mxinfo " id="T4:U38">~</span></span>,<span class="mxinfo " id="T4:U39"><span class="mxinfo " id="T4:U40">~</span></span>] = <span class="fcn" id="F273N22:B331">nearestNeighbour</span>(<span class="var type1" id="S61T47U332">xRand</span>,<span class="var type1" id="S44T50U333">T</span>,<span class="var type1" id="S55T45U334">HGAINS</span>,<span class="var type1" id="S46T20U335">jointLimits</span>,<span class="var type1" id="S48T5U336">kC</span>,<span class="var type1" id="S45T4U337">nodeIDCount</span>,<span class="mxinfo " id="T7:U47"><span class="var type1" id="S53T7U338">NODE_SIZE</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="120,75" id="srcline75">75</a></span><span class="line">    [<span class="mxinfo " id="T67:U49"><span class="var type1" id="S65T67U342">xNew</span></span>,<span class="mxinfo " id="T53:U51"><span class="var type1" id="S66T53U343">transitionArray</span></span>]  = <span class="fcn" id="F371N29:B345">selectInput</span>(<span class="var type1" id="S63T67U346">xNear</span>,<span class="var type1" id="S61T47U347">xRand</span>,<span class="var type1" id="S50T48U348">U</span>,<span class="var type1" id="S52T4U349">dt</span>,<span class="var type1" id="S51T4U350">Dt</span>,<span class="mxinfo " id="T7:U58"><span class="var type1" id="S53T7U351">NODE_SIZE</span></span>,<span class="mxinfo " id="T7:U60"><span class="var type1" id="S54T7U352">U_SIZE</span></span>,<span class="var type1" id="S55T45U353">HGAINS</span>,<span class="var type1" id="S48T5U354">kC</span>,<span class="mxinfo " id="T4:U64"><span class="var type1" id="S56T4U355">ankleThreshold</span></span>,<span class="var type1" id="S46T20U356">jointLimits</span>,<span class="var type1" id="S59T49U357">uBDot</span>,<span class="var type1" id="S60T7U358">legNum</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="120,76" id="srcline76">76</a></span><span class="line">    <span class="mxinfo " id="T4:U69"><span class="var type1" id="S45T4U361">nodeIDCount</span> = <span class="mxinfo " id="T4:U71"><span class="var type1" id="S45T4U363">nodeIDCount</span> + <span class="mxinfo " id="T4:U73">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="120,77" id="srcline77">77</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="120,78" id="srcline78">78</a></span><span class="line">    <span class="mxinfo " id="T4:U74"><span class="mxinfo " id="T4:U75"><span class="var type1" id="S65T67U368">xNew</span>(<span class="mxinfo " id="T4:U77">1</span>)</span> = <span class="var type1" id="S45T4U370">nodeIDCount</span></span>;                                  <span class="comment">%Node ID</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,79" id="srcline79">79</a></span><span class="line">    <span class="mxinfo " id="T4:U79"><span class="mxinfo " id="T4:U80"><span class="var type1" id="S65T67U374">xNew</span>(<span class="mxinfo " id="T4:U82">2</span>)</span> = <span class="mxinfo " id="T4:U83"><span class="var type1" id="S63T67U377">xNear</span>(<span class="mxinfo " id="T4:U85">1</span>)</span></span>;                                     <span class="comment">%Parent ID</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,80" id="srcline80">80</a></span><span class="line">    <span class="mxinfo " id="T4:U86"><span class="mxinfo " id="T4:U87"><span class="var type1" id="S65T67U382">xNew</span>(<span class="mxinfo " id="T4:U89">3</span>)</span> = <span class="mxinfo " id="T4:U90"><span class="mxinfo " id="T4:U91"><span class="var type1" id="S63T67U386">xNear</span>(<span class="mxinfo " id="T4:U93">3</span>)</span> + <span class="mxinfo " id="T4:U94"><span class="fcn" id="F372N19:B389">heuristicSingleLeg</span>(<span class="var type1" id="S65T67U390">xNew</span>,<span class="var type1" id="S63T67U391">xNear</span>,<span class="var type1" id="S55T45U392">HGAINS</span>,<span class="var type1" id="S46T20U393">jointLimits</span>,<span class="var type1" id="S48T5U394">kC</span>)</span></span></span>;           <span class="comment">%Cost</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,81" id="srcline81">81</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="120,82" id="srcline82">82</a></span><span class="line">    <span class="mxinfo " id="T53:U100"><span class="mxinfo " id="T53:U101"><span class="var type1" id="S44T50U398">T</span>(<span class="var type1" id="S45T4U399">nodeIDCount</span>,:)</span> = <span class="mxinfo " id="T53:U104">[<span class="var type1" id="S65T67U403">xNew</span> <span class="var type1" id="S66T53U404">transitionArray</span>]</span></span>;                                <span class="comment">%Append the new node to the tree.    </span></span></span>
<span class="srcline"><span class="lineno"><a href="120,83" id="srcline83">83</a></span><span class="line">    <span class="comment">%if mod(nodeIDCount,100) == 0</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,84" id="srcline84">84</a></span><span class="line">        <span class="comment">%fprintf('PROGRESS STATUS: %.0f NODES USED\n',nodeIDCount);</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,85" id="srcline85">85</a></span><span class="line">    <span class="comment">%end</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,86" id="srcline86">86</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="120,87" id="srcline87">87</a></span><span class="line"></span></span>
</pre>
