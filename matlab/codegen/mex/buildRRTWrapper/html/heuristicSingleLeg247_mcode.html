<pre class="code">
<span class="srcline"><span class="lineno"><a href="96,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%heuristicSingleLeg.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%author: wreid</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%date: 20150107</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,5" id="srcline5"> 5</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T4U3">d</span> = heuristicSingleLeg(<span class="var type1" id="S3T51U6">sA</span>,<span class="var type1" id="S4T51U7">sB</span>,<span class="var type1" id="S5T8U8">HGAINS</span>,<span class="var type1" id="S6T5U9">jointLimits</span>,<span class="var type1" id="S7T6U10">kC</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="96,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%heuristic Calculates the distance between states x1 and x2.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,7" id="srcline7"> 7</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,8" id="srcline8"> 8</a></span><span class="line">    <span class="comment">%Calculate the distance between angular positions.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,9" id="srcline9"> 9</a></span><span class="line">    <span class="mxinfo " id="T4:U7"><span class="var type1" id="S8T4U13">xStarMin</span> = <span class="mxinfo " id="T4:U9"><span class="fcn" id="F243N20:B15">legRadius</span>(<span class="mxinfo " id="T4:U10"><span class="var type1" id="S6T5U17">jointLimits</span>(<span class="mxinfo " id="T4:U12">1</span>,<span class="mxinfo " id="T4:U13">2</span>)</span>,<span class="mxinfo " id="T4:U14"><span class="var type1" id="S6T5U21">jointLimits</span>(<span class="mxinfo " id="T4:U16">1</span>,<span class="mxinfo " id="T4:U17">3</span>)</span>,<span class="var type1" id="S7T6U24">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T4:U19"><span class="var type1" id="S10T4U27">xStarMax</span> = <span class="mxinfo " id="T4:U21"><span class="fcn" id="F243N20:B29">legRadius</span>(<span class="mxinfo " id="T4:U22"><span class="var type1" id="S6T5U31">jointLimits</span>(<span class="mxinfo " id="T4:U24">2</span>,<span class="mxinfo " id="T4:U25">2</span>)</span>,<span class="mxinfo " id="T4:U26"><span class="var type1" id="S6T5U35">jointLimits</span>(<span class="mxinfo " id="T4:U28">2</span>,<span class="mxinfo " id="T4:U29">3</span>)</span>,<span class="var type1" id="S7T6U38">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,11" id="srcline11">11</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,12" id="srcline12">12</a></span><span class="line">    <span class="mxinfo " id="T4:U31"><span class="var type1" id="S11T4U41">dxStarMax</span> = <span class="mxinfo " id="T4:U33"><span class="var type1" id="S10T4U43">xStarMax</span>-<span class="var type1" id="S8T4U44">xStarMin</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,13" id="srcline13">13</a></span><span class="line">    <span class="mxinfo " id="T4:U36"><span class="var type1" id="S12T4U47">dAlphaMax</span> = <span class="mxinfo " id="T4:U38"><span class="fcn" id="F245N2:B49">angDiff</span>(<span class="mxinfo " id="T4:U39"><span class="var type1" id="S6T5U51">jointLimits</span>(<span class="mxinfo " id="T4:U41">1</span>,<span class="mxinfo " id="T4:U42">1</span>)</span>,<span class="mxinfo " id="T4:U43"><span class="var type1" id="S6T5U55">jointLimits</span>(<span class="mxinfo " id="T4:U45">1</span>,<span class="mxinfo " id="T4:U46">2</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,14" id="srcline14">14</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T4:U47"><span class="var type1" id="S14T4U60">dPosMax</span> = <span class="mxinfo " id="T4:U49"><span class="fcn" id="F246N21:B62">posMetric</span>(<span class="var type1" id="S8T4U63">xStarMin</span>,<span class="var type1" id="S11T4U64">dxStarMax</span>,<span class="var type1" id="S12T4U65">dAlphaMax</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,16" id="srcline16">16</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo " id="T4:U53"><span class="var type1" id="S16T4U68">xStarA</span> = <span class="mxinfo " id="T4:U55"><span class="fcn" id="F243N20:B70">legRadius</span>(<span class="mxinfo " id="T4:U56"><span class="var type1" id="S3T51U73">sA</span>.beta</span>(1),<span class="mxinfo " id="T4:U58"><span class="var type1" id="S3T51U78">sA</span>.gamma</span>(1),<span class="var type1" id="S7T6U81">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,18" id="srcline18">18</a></span><span class="line">    <span class="mxinfo " id="T4:U61"><span class="var type1" id="S17T4U84">xStarB</span> = <span class="mxinfo " id="T4:U63"><span class="fcn" id="F243N20:B86">legRadius</span>(<span class="mxinfo " id="T4:U64"><span class="var type1" id="S4T51U89">sB</span>.beta</span>(1),<span class="mxinfo " id="T4:U66"><span class="var type1" id="S4T51U94">sB</span>.gamma</span>(1),<span class="var type1" id="S7T6U97">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,19" id="srcline19">19</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T4:U69"><span class="var type1" id="S18T4U100">dxStar</span> = <span class="mxinfo " id="T4:U71"><span class="var type1" id="S17T4U102">xStarB</span>-<span class="var type1" id="S16T4U103">xStarA</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T4:U74"><span class="var type1" id="S19T4U106">dAlpha</span> = <span class="mxinfo " id="T4:U76"><span class="fcn" id="F245N2:B108">angDiff</span>(<span class="mxinfo " id="T4:U77"><span class="var type1" id="S3T51U111">sA</span>.alpha</span>(1),<span class="mxinfo " id="T4:U79"><span class="var type1" id="S4T51U116">sB</span>.alpha</span>(1))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,22" id="srcline22">22</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,23" id="srcline23">23</a></span><span class="line">    <span class="mxinfo " id="T4:U81"><span class="var type1" id="S20T4U121">dPos</span> = <span class="mxinfo " id="T4:U83">sqrt(<span class="mxinfo " id="T4:U84"><span class="mxinfo " id="T4:U85"><span class="var type1" id="S18T4U126">dxStar</span>^2</span>+<span class="mxinfo " id="T4:U87"><span class="mxinfo " id="T4:U88"><span class="var type1" id="S16T4U130">xStarA</span>^2</span>*<span class="mxinfo " id="T4:U90"><span class="var type1" id="S19T4U133">dAlpha</span>^2</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo " id="T4:U92"><span class="var type1" id="S22T4U137">dPosNorm</span> = <span class="mxinfo " id="T4:U94"><span class="mxinfo " id="T4:U95"><span class="mxinfo " id="T4:U96"><span class="var type1" id="S5T8U141">HGAINS</span>(<span class="mxinfo " id="T4:U98">1</span>)</span>*<span class="var type1" id="S20T4U143">dPos</span></span>/<span class="var type1" id="S14T4U144">dPosMax</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,25" id="srcline25">25</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,26" id="srcline26">26</a></span><span class="line">    <span class="comment">%Calculate the total distance.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T4:U101"><span class="var type1" id="S2T4U147">d</span> = <span class="var type1" id="S20T4U148">dPos</span></span>; <span class="comment">%dPosNorm+dVelNorm </span></span></span>
<span class="srcline"><span class="lineno"><a href="96,28" id="srcline28">28</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="96,29" id="srcline29">29</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,30" id="srcline30">30</a></span><span class="line"></span></span>
</pre>
