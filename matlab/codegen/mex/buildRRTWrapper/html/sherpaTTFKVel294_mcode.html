<pre class="code">
<span class="srcline"><span class="lineno"><a href="116,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%sherpaTTFKVel.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%author: wreid</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%date: 20150122</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,5" id="srcline5"> 5</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T9U3">uDot</span>,<span class="var type0" id="S3T0U4">uDotNew</span>] = sherpaTTFKVel(<span class="var type1" id="S4T9U7">qDot</span>,<span class="var type1" id="S5T9U8">q</span>,<span class="var type1" id="S6T5U9">kinematicConst</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="116,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%sherpaTTFKVel Sherpa_TT single leg forward velocity kinematics.</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,8" id="srcline8"> 8</a></span><span class="line">    [<span class="mxinfo " id="T4:U5"><span class="mxinfo " id="T4:U6">~</span></span>,<span class="mxinfo " id="T4:U7"><span class="var type1" id="S7T4U14">L2</span></span>,<span class="mxinfo " id="T4:U9"><span class="var type1" id="S8T4U15">L3</span></span>,<span class="mxinfo " id="T4:U11"><span class="var type1" id="S9T4U16">L4</span></span>,<span class="mxinfo " id="T4:U13"><span class="var type1" id="S10T4U17">L5</span></span>,<span class="mxinfo " id="T4:U15"><span class="mxinfo " id="T4:U16">~</span></span>,<span class="mxinfo " id="T4:U17"><span class="var type1" id="S11T4U19">L7</span></span>,<span class="mxinfo " id="T4:U19"><span class="mxinfo " id="T4:U20">~</span></span>,<span class="mxinfo " id="T4:U21"><span class="var type1" id="S12T4U21">zeta</span></span>,<span class="mxinfo " id="T4:U23"><span class="mxinfo " id="T4:U24">~</span></span>,<span class="mxinfo " id="T4:U25"><span class="mxinfo " id="T4:U26">~</span></span>,<span class="mxinfo " id="T4:U27"><span class="mxinfo " id="T4:U28">~</span></span>,<span class="mxinfo " id="T4:U29"><span class="mxinfo " id="T4:U30">~</span></span>,<span class="mxinfo " id="T4:U31"><span class="mxinfo " id="T4:U32">~</span></span>,<span class="mxinfo " id="T4:U33"><span class="mxinfo " id="T4:U34">~</span></span>,<span class="mxinfo " id="T4:U35"><span class="mxinfo " id="T4:U36">~</span></span>] = <span class="fcn" id="F10N11:B30">extractKinematicConstants</span>(<span class="var type1" id="S6T5U31">kinematicConst</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="116,9" id="srcline9"> 9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T4:U38"><span class="var type1" id="S14T4U34">alpha</span> = <span class="mxinfo " id="T4:U40"><span class="var type1" id="S5T9U36">q</span>(<span class="mxinfo " id="T4:U42">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo " id="T4:U43"><span class="var type1" id="S15T4U40">beta</span> = <span class="mxinfo " id="T4:U45"><span class="var type1" id="S5T9U42">q</span>(<span class="mxinfo " id="T4:U47">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,12" id="srcline12">12</a></span><span class="line">    <span class="mxinfo " id="T4:U48"><span class="var type1" id="S16T4U46">gamma</span> = <span class="mxinfo " id="T4:U50"><span class="var type1" id="S5T9U48">q</span>(<span class="mxinfo " id="T4:U52">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,13" id="srcline13">13</a></span><span class="line">    <span class="mxinfo " id="T4:U53"><span class="var type1" id="S17T4U52">phi</span> = <span class="mxinfo " id="T4:U55">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,14" id="srcline14">14</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="116,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T4:U56"><span class="var type1" id="S18T4U56">alphaDot</span> = <span class="mxinfo " id="T4:U58"><span class="var type1" id="S4T9U58">qDot</span>(<span class="mxinfo " id="T4:U60">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,16" id="srcline16">16</a></span><span class="line">    <span class="mxinfo " id="T4:U61"><span class="var type1" id="S19T4U62">betaDot</span> = <span class="mxinfo " id="T4:U63"><span class="var type1" id="S4T9U64">qDot</span>(<span class="mxinfo " id="T4:U65">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo " id="T4:U66"><span class="var type1" id="S20T4U68">gammaDot</span> = <span class="mxinfo " id="T4:U68"><span class="var type1" id="S4T9U70">qDot</span>(<span class="mxinfo " id="T4:U70">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,18" id="srcline18">18</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T4:U71"><span class="var type1" id="S21T4U74">xDot</span> =      <span class="mxinfo " id="T4:U73"><span class="mxinfo " id="T4:U74"><span class="mxinfo " id="T4:U75"><span class="mxinfo " id="T4:U76"><span class="mxinfo " id="T4:U77">- <span class="var type1" id="S18T4U80">alphaDot</span></span>*<span class="mxinfo " id="T4:U79">sin(<span class="var type1" id="S14T4U83">alpha</span>)</span></span>*(<span class="mxinfo " id="T4:U81"><span class="mxinfo " id="T4:U82"><span class="mxinfo " id="T4:U83"><span class="mxinfo " id="T4:U84"><span class="var type1" id="S7T4U89">L2</span> - <span class="var type1" id="S11T4U90">L7</span></span> + <span class="mxinfo " id="T4:U87"><span class="var type1" id="S10T4U92">L5</span>*<span class="mxinfo " id="T4:U89">cos(<span class="mxinfo " id="T4:U90"><span class="var type1" id="S16T4U96">gamma</span> + <span class="var type1" id="S12T4U97">zeta</span></span>)</span></span></span> + <span class="mxinfo " id="T4:U93"><span class="var type1" id="S8T4U99">L3</span>*<span class="mxinfo " id="T4:U95">cos(<span class="var type1" id="S15T4U102">beta</span>)</span></span></span> + <span class="mxinfo " id="T4:U97"><span class="var type1" id="S9T4U104">L4</span>*<span class="mxinfo " id="T4:U99">cos(<span class="var type1" id="S12T4U107">zeta</span>)</span></span></span>)</span><span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="116,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T4:U71"><span class="mxinfo " id="T4:U73"><span class="mxinfo " id="T4:U74">                - <span class="mxinfo " id="T4:U101"><span class="mxinfo " id="T4:U102"><span class="mxinfo " id="T4:U103"><span class="var type1" id="S19T4U111">betaDot</span>*<span class="var type1" id="S8T4U112">L3</span></span>*<span class="mxinfo " id="T4:U106">cos(<span class="var type1" id="S14T4U115">alpha</span>)</span></span>*<span class="mxinfo " id="T4:U108">sin(<span class="var type1" id="S15T4U118">beta</span>)</span></span></span><span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="116,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T4:U71"><span class="mxinfo " id="T4:U73">                - <span class="mxinfo " id="T4:U110"><span class="mxinfo " id="T4:U111"><span class="mxinfo " id="T4:U112"><span class="var type1" id="S20T4U122">gammaDot</span>*<span class="var type1" id="S10T4U123">L5</span></span>*<span class="mxinfo " id="T4:U115">sin(<span class="mxinfo " id="T4:U116"><span class="var type1" id="S16T4U127">gamma</span> + <span class="var type1" id="S12T4U128">zeta</span></span>)</span></span>*<span class="mxinfo " id="T4:U119">cos(<span class="var type1" id="S14T4U131">alpha</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T4:U121"><span class="var type1" id="S24T4U134">yDot</span> =      <span class="mxinfo " id="T4:U123"><span class="mxinfo " id="T4:U124"><span class="mxinfo " id="T4:U125"><span class="mxinfo " id="T4:U126"><span class="var type1" id="S18T4U139">alphaDot</span>*<span class="mxinfo " id="T4:U128">cos(<span class="var type1" id="S14T4U142">alpha</span>)</span></span>*(<span class="mxinfo " id="T4:U130"><span class="mxinfo " id="T4:U131"><span class="mxinfo " id="T4:U132"><span class="mxinfo " id="T4:U133"><span class="var type1" id="S7T4U148">L2</span> - <span class="var type1" id="S11T4U149">L7</span></span> + <span class="mxinfo " id="T4:U136"><span class="var type1" id="S10T4U151">L5</span>*<span class="mxinfo " id="T4:U138">cos(<span class="mxinfo " id="T4:U139"><span class="var type1" id="S16T4U155">gamma</span> + <span class="var type1" id="S12T4U156">zeta</span></span>)</span></span></span> + <span class="mxinfo " id="T4:U142"><span class="var type1" id="S8T4U158">L3</span>*<span class="mxinfo " id="T4:U144">cos(<span class="var type1" id="S15T4U161">beta</span>)</span></span></span> + <span class="mxinfo " id="T4:U146"><span class="var type1" id="S9T4U163">L4</span>*<span class="mxinfo " id="T4:U148">cos(<span class="var type1" id="S12T4U166">zeta</span>)</span></span></span>)</span><span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="116,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T4:U121"><span class="mxinfo " id="T4:U123"><span class="mxinfo " id="T4:U124">                -<span class="mxinfo " id="T4:U150"><span class="mxinfo " id="T4:U151"><span class="mxinfo " id="T4:U152"><span class="var type1" id="S20T4U170">gammaDot</span>*<span class="var type1" id="S10T4U171">L5</span></span>*<span class="mxinfo " id="T4:U155">sin(<span class="mxinfo " id="T4:U156"><span class="var type1" id="S16T4U175">gamma</span> + <span class="var type1" id="S12T4U176">zeta</span></span>)</span></span>*<span class="mxinfo " id="T4:U159">sin(<span class="var type1" id="S14T4U179">alpha</span>)</span></span></span><span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="116,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T4:U121"><span class="mxinfo " id="T4:U123">                -<span class="mxinfo " id="T4:U161"><span class="mxinfo " id="T4:U162"><span class="mxinfo " id="T4:U163"><span class="var type1" id="S19T4U183">betaDot</span>*<span class="var type1" id="S8T4U184">L3</span></span>*<span class="mxinfo " id="T4:U166">sin(<span class="var type1" id="S14T4U187">alpha</span>)</span></span>*<span class="mxinfo " id="T4:U168">sin(<span class="var type1" id="S15T4U190">beta</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,25" id="srcline25">25</a></span><span class="line">    <span class="mxinfo " id="T4:U170"><span class="var type1" id="S25T4U193">zDot</span> =      <span class="mxinfo " id="T4:U172"><span class="mxinfo " id="T4:U173"><span class="mxinfo " id="T4:U174"><span class="mxinfo " id="T4:U175">-<span class="var type1" id="S19T4U198">betaDot</span></span>*<span class="var type1" id="S8T4U199">L3</span></span>*<span class="mxinfo " id="T4:U178">cos(<span class="var type1" id="S15T4U202">beta</span>)</span></span><span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="116,26" id="srcline26">26</a></span><span class="line"><span class="mxinfo " id="T4:U170"><span class="mxinfo " id="T4:U172">                -<span class="mxinfo " id="T4:U180"><span class="mxinfo " id="T4:U181"><span class="var type1" id="S10T4U205">L5</span>*<span class="var type1" id="S20T4U206">gammaDot</span></span>*<span class="mxinfo " id="T4:U184">cos(<span class="mxinfo " id="T4:U185"><span class="var type1" id="S12T4U210">zeta</span>+<span class="var type1" id="S16T4U211">gamma</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,27" id="srcline27">27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,28" id="srcline28">28</a></span><span class="line">    <span class="mxinfo " id="T9:U188"><span class="var type1" id="S2T9U214">uDot</span> = <span class="mxinfo " id="T9:U190"><span class="mxinfo " id="T44:U191">[<span class="var type1" id="S21T4U218">xDot</span> <span class="var type1" id="S24T4U219">yDot</span> <span class="var type1" id="S25T4U220">zDot</span>]</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,29" id="srcline29">29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,30" id="srcline30">30</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
