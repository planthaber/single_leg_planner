<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S66T59U500">pathC</span>,<span class="var type1" id="S67T60U501">pathJ</span>] = transformPath(<span class="var type1" id="S68T49U504">pathOld</span>,<span class="var type1" id="S69T9U505">NODE_SIZE</span>,<span class="var type1" id="S70T6U506">kC</span>,<span class="var type1" id="S71T4U507">dt</span>,<span class="var type1" id="S72T4U508">Dt</span>,<span class="var type1" id="S73T10U509">TP2B</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line">    <span class="comment">%Take the pathOld array and combine the general nodes and intermediate</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line">    <span class="comment">%states into a uniform path. The output path should be a npx6 array</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line">    <span class="comment">%that contains the n general nodes and the p intermediate nodes between</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line">    <span class="comment">%general nodes. Each row in the path matrix contains </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">    <span class="comment">%[t,x,y,z,xDot,yDot,zDot] state data.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line">    <span class="mxinfo " id="T4:U9">[<span class="var type1" id="S74T4U513">pathH</span>,<span class="var type1" id="S75T4U514">pathW</span>] = size(<span class="var type1" id="S68T49U517">pathOld</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line">    <span class="mxinfo " id="T59:U13"><span class="var type1" id="S66T59U520">pathC</span> = <span class="mxinfo " id="T59:U15">zeros(<span class="mxinfo " id="T4:U16"><span class="mxinfo " id="T4:U17">round(<span class="mxinfo " id="T4:U18"><span class="var type1" id="S72T4U527">Dt</span>/<span class="var type1" id="S71T4U528">dt</span></span>)</span>*<span class="var type1" id="S74T4U529">pathH</span></span>,<span class="mxinfo " id="T4:U22">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line">    <span class="mxinfo " id="T60:U23"><span class="var type1" id="S67T60U533">pathJ</span> = <span class="mxinfo " id="T60:U25">zeros(<span class="mxinfo " id="T4:U26"><span class="mxinfo " id="T4:U27">round(<span class="mxinfo " id="T4:U28"><span class="var type1" id="S72T4U540">Dt</span>/<span class="var type1" id="S71T4U541">dt</span></span>)</span>*<span class="var type1" id="S74T4U542">pathH</span></span>,<span class="mxinfo " id="T4:U32">9</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line">    <span class="mxinfo " id="T4:U33"><span class="var type1" id="S79T4U546">count</span> = <span class="mxinfo " id="T4:U35">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line">    <span class="mxinfo " id="T4:U36"><span class="var type1" id="S80T4U550">time</span> = <span class="mxinfo " id="T4:U38"><span class="mxinfo " id="T4:U39"><span class="mxinfo " id="T4:U40">round(<span class="mxinfo " id="T4:U41"><span class="var type1" id="S72T4U556">Dt</span>/<span class="var type1" id="S71T4U557">dt</span></span>)</span>*<span class="var type1" id="S74T4U558">pathH</span></span>*<span class="var type1" id="S71T4U559">dt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S81T4U562">i</span> = <span class="mxinfo " id="T4:U47">1</span>:<span class="var type1" id="S74T4U565">pathH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S82T9U568">j</span> = <span class="var type1" id="S75T4U571">pathW</span>:<span class="mxinfo " id="T9:U51">-6</span>:<span class="mxinfo " id="T9:U52"><span class="var type1" id="S69T9U575">NODE_SIZE</span>+<span class="mxinfo " id="T9:U54">7</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line">            <span class="mxinfo " id="T8:U55"><span class="var type1" id="S83T8U579">uP</span> = <span class="mxinfo " id="T8:U57"><span class="fcn" id="F14N24:B581">sherpaTTFK</span>(<span class="mxinfo " id="T8:U58"><span class="var type1" id="S68T49U583">pathOld</span>(<span class="var type1" id="S81T4U584">i</span>,<span class="mxinfo " id="T82:U61"><span class="mxinfo " id="T9:U62"><span class="var type1" id="S82T9U587">j</span>-5</span>:<span class="mxinfo " id="T9:U64"><span class="var type1" id="S82T9U590">j</span>-3</span></span>)</span>,<span class="var type1" id="S70T6U592">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line">            <span class="mxinfo " id="T12:U67"><span class="var type1" id="S85T12U595">uB</span> = <span class="mxinfo " id="T12:U69"><span class="mxinfo " id="T12:U70"><span class="mxinfo " id="T11:U71"><span class="var type1" id="S73T10U599">TP2B</span>(<span class="mxinfo " id="T8:U73"><span class="mxinfo " id="T4:U74">1</span>:<span class="mxinfo " id="T4:U75">3</span></span>,<span class="mxinfo " id="T8:U76"><span class="mxinfo " id="T4:U77">1</span>:<span class="mxinfo " id="T4:U78">3</span></span>)</span>*<span class="mxinfo " id="T12:U79"><span class="var type1" id="S83T8U607">uP</span>'</span></span> + <span class="mxinfo " id="T12:U81"><span class="var type1" id="S73T10U609">TP2B</span>(<span class="mxinfo " id="T8:U83"><span class="mxinfo " id="T4:U84">1</span>:<span class="mxinfo " id="T4:U85">3</span></span>,<span class="mxinfo " id="T4:U86">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line">            <span class="mxinfo " id="T12:U87"><span class="var type1" id="S86T12U616">uDot</span> = <span class="mxinfo " id="T12:U89"><span class="fcn" id="F366N25:B618">sherpaTTFKVel</span>(<span class="mxinfo " id="T12:U90"><span class="mxinfo " id="T8:U91"><span class="var type1" id="S68T49U621">pathOld</span>(<span class="var type1" id="S81T4U622">i</span>,<span class="mxinfo " id="T82:U94"><span class="mxinfo " id="T9:U95"><span class="var type1" id="S82T9U625">j</span>-2</span>:<span class="var type1" id="S82T9U627">j</span></span>)</span>'</span>,<span class="mxinfo " id="T12:U98"><span class="mxinfo " id="T8:U99"><span class="var type1" id="S68T49U630">pathOld</span>(<span class="var type1" id="S81T4U631">i</span>,<span class="mxinfo " id="T82:U102"><span class="mxinfo " id="T9:U103"><span class="var type1" id="S82T9U634">j</span>-5</span>:<span class="mxinfo " id="T9:U105"><span class="var type1" id="S82T9U637">j</span>-3</span></span>)</span>'</span>,<span class="var type1" id="S70T6U639">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line">            <span class="mxinfo " id="T12:U108"><span class="var type1" id="S88T12U642">uBDot</span> = <span class="mxinfo " id="T12:U110"><span class="mxinfo " id="T11:U111"><span class="var type1" id="S73T10U645">TP2B</span>(<span class="mxinfo " id="T8:U113"><span class="mxinfo " id="T4:U114">1</span>:<span class="mxinfo " id="T4:U115">3</span></span>,<span class="mxinfo " id="T8:U116"><span class="mxinfo " id="T4:U117">1</span>:<span class="mxinfo " id="T4:U118">3</span></span>)</span>*<span class="var type1" id="S86T12U652">uDot</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line">            <span class="mxinfo " id="T74:U120"><span class="mxinfo " id="T74:U121"><span class="var type1" id="S66T59U656">pathC</span>(<span class="var type1" id="S79T4U657">count</span>,:)</span> = <span class="mxinfo " id="T74:U124">[<span class="var type1" id="S80T4U661">time</span> <span class="mxinfo " id="T8:U126"><span class="var type1" id="S85T12U663">uB</span>'</span> <span class="mxinfo " id="T8:U128"><span class="var type1" id="S88T12U665">uBDot</span>'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line">            <span class="mxinfo " id="T75:U130"><span class="mxinfo " id="T75:U131"><span class="var type1" id="S67T60U669">pathJ</span>(<span class="var type1" id="S79T4U670">count</span>,:)</span> = <span class="mxinfo " id="T75:U134">[<span class="var type1" id="S80T4U674">time</span> <span class="mxinfo " id="T21:U136"><span class="var type1" id="S68T49U676">pathOld</span>(<span class="var type1" id="S81T4U677">i</span>,<span class="mxinfo " id="T83:U139"><span class="mxinfo " id="T9:U140"><span class="var type1" id="S82T9U680">j</span>-5</span>:<span class="var type1" id="S82T9U682">j</span></span>)</span> <span class="mxinfo " id="T4:U143"><span class="var type1" id="S68T49U684">pathOld</span>(<span class="var type1" id="S81T4U685">i</span>,<span class="mxinfo " id="T4:U146">10</span>)</span> <span class="mxinfo " id="T4:U147"><span class="var type1" id="S68T49U688">pathOld</span>(<span class="var type1" id="S81T4U689">i</span>,<span class="mxinfo " id="T4:U150">11</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line">            <span class="mxinfo " id="T4:U151"><span class="var type1" id="S80T4U693">time</span> = <span class="mxinfo " id="T4:U153"><span class="var type1" id="S80T4U695">time</span> - <span class="var type1" id="S71T4U696">dt</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line">            <span class="mxinfo " id="T4:U156"><span class="var type1" id="S79T4U699">count</span> = <span class="mxinfo " id="T4:U158"><span class="var type1" id="S79T4U701">count</span> + <span class="mxinfo " id="T4:U160">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line">    <span class="mxinfo " id="T59:U161"><span class="var type1" id="S66T59U705">pathC</span> = <span class="mxinfo " id="T59:U163">flipud(<span class="mxinfo " id="T59:U164"><span class="var type1" id="S66T59U709">pathC</span>(:,<span class="mxinfo " id="T74:U166"><span class="mxinfo " id="T4:U167">1</span>:<span class="mxinfo " id="T4:U168">end</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line">    <span class="mxinfo " id="T60:U169"><span class="var type1" id="S67T60U717">pathJ</span> = <span class="mxinfo " id="T60:U171">flipud(<span class="mxinfo " id="T60:U172"><span class="var type1" id="S67T60U721">pathJ</span>(:,<span class="mxinfo " id="T75:U174"><span class="mxinfo " id="T4:U175">1</span>:<span class="mxinfo " id="T4:U176">end</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
