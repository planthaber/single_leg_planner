<pre class="code">
<span class="srcline"><span class="lineno"><a href="6,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%SHERPATTFK Calcluates the Cartesian position of the wheel contact point</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%relative to the pan coordinate frame for the SherpaTT Leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%Inputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%-q: A 1x3 vector containing the joint angular positions [alpha beta gamma]</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%-kC: A struct containing the kinematic constants of the SherpaTT leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%Outputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%sherpaTTFK.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,10" id="srcline10">10</a></span><span class="line"><span class="comment">%author: wreid</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,11" id="srcline11">11</a></span><span class="line"><span class="comment">%date: 20150122</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,13" id="srcline13">13</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T6U3">u</span> = sherpaTTFK(<span class="var type1" id="S3T6U6">q</span>,<span class="var type1" id="S4T4U7">kC</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="6,14" id="srcline14">14</a></span><span class="line"><span class="comment">%sherpaTTFK Sherpa_TT Forward Kinematics</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,15" id="srcline15">15</a></span><span class="line"><span class="comment">%   Calculates the x,y,z position of the contact point given the alpha,</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,16" id="srcline16">16</a></span><span class="line"><span class="comment">%   beta and gamma joint values.</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,18" id="srcline18">18</a></span><span class="line">    <span class="mxinfo " id="T3:U4"><span class="var type1" id="S5T3U10">alpha</span> = <span class="mxinfo " id="T3:U6"><span class="var type1" id="S3T6U12">q</span>(<span class="mxinfo " id="T3:U8">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T3:U9"><span class="var type1" id="S6T3U16">beta</span> = <span class="mxinfo " id="T3:U11"><span class="var type1" id="S3T6U18">q</span>(<span class="mxinfo " id="T3:U13">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T3:U14"><span class="var type1" id="S7T3U22">gamma</span> = <span class="mxinfo " id="T3:U16"><span class="var type1" id="S3T6U24">q</span>(<span class="mxinfo " id="T3:U18">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,21" id="srcline21">21</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="6,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T6:U19"><span class="var type1" id="S2T6U28">u</span> = <span class="mxinfo " id="T6:U21">zeros(<span class="mxinfo " id="T3:U22">1</span>,<span class="mxinfo " id="T3:U23">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="6,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo " id="T3:U24"><span class="mxinfo " id="T3:U25"><span class="var type1" id="S2T6U36">u</span>(<span class="mxinfo " id="T3:U27">1</span>)</span> = <span class="mxinfo " id="T3:U28">(<span class="mxinfo " id="T3:U29"><span class="mxinfo " id="T3:U30"><span class="mxinfo " id="T3:U31"><span class="mxinfo " id="T3:U32"><span class="mxinfo " id="T3:U33"><span class="var type1" id="S4T4U45">kC</span>.l2</span> + <span class="mxinfo " id="T3:U35"><span class="mxinfo " id="T3:U36"><span class="var type1" id="S4T4U49">kC</span>.l3</span>*<span class="mxinfo " id="T3:U38">cos(<span class="mxinfo " id="T3:U39">-<span class="var type1" id="S6T3U54">beta</span></span>)</span></span></span>+<span class="mxinfo " id="T3:U41"><span class="mxinfo " id="T3:U42"><span class="var type1" id="S4T4U57">kC</span>.l4</span>*<span class="mxinfo " id="T3:U44">cos(<span class="mxinfo " id="T3:U45"><span class="var type1" id="S4T4U62">kC</span>.zeta</span>)</span></span></span>+<span class="mxinfo " id="T3:U47"><span class="mxinfo " id="T3:U48"><span class="var type1" id="S4T4U66">kC</span>.l5</span>*<span class="mxinfo " id="T3:U50">cos(<span class="mxinfo " id="T3:U51"><span class="var type1" id="S7T3U71">gamma</span>+<span class="mxinfo " id="T3:U53"><span class="var type1" id="S4T4U73">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T3:U55"><span class="var type1" id="S4T4U76">kC</span>.l7</span></span>).*<span class="mxinfo " id="T3:U57">cos(<span class="var type1" id="S5T3U80">alpha</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,25" id="srcline25">25</a></span><span class="line">    <span class="mxinfo " id="T3:U59"><span class="mxinfo " id="T3:U60"><span class="var type1" id="S2T6U84">u</span>(<span class="mxinfo " id="T3:U62">2</span>)</span> = <span class="mxinfo " id="T3:U63">(<span class="mxinfo " id="T3:U64"><span class="mxinfo " id="T3:U65"><span class="mxinfo " id="T3:U66"><span class="mxinfo " id="T3:U67"><span class="mxinfo " id="T3:U68"><span class="var type1" id="S4T4U93">kC</span>.l2</span> + <span class="mxinfo " id="T3:U70"><span class="mxinfo " id="T3:U71"><span class="var type1" id="S4T4U97">kC</span>.l3</span>*<span class="mxinfo " id="T3:U73">cos(<span class="mxinfo " id="T3:U74">-<span class="var type1" id="S6T3U102">beta</span></span>)</span></span></span>+<span class="mxinfo " id="T3:U76"><span class="mxinfo " id="T3:U77"><span class="var type1" id="S4T4U105">kC</span>.l4</span>*<span class="mxinfo " id="T3:U79">cos(<span class="mxinfo " id="T3:U80"><span class="var type1" id="S4T4U110">kC</span>.zeta</span>)</span></span></span>+<span class="mxinfo " id="T3:U82"><span class="mxinfo " id="T3:U83"><span class="var type1" id="S4T4U114">kC</span>.l5</span>*<span class="mxinfo " id="T3:U85">cos(<span class="mxinfo " id="T3:U86"><span class="var type1" id="S7T3U119">gamma</span>+<span class="mxinfo " id="T3:U88"><span class="var type1" id="S4T4U121">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T3:U90"><span class="var type1" id="S4T4U124">kC</span>.l7</span></span>).*<span class="mxinfo " id="T3:U92">sin(<span class="var type1" id="S5T3U128">alpha</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T3:U94"><span class="mxinfo " id="T3:U95"><span class="var type1" id="S2T6U132">u</span>(<span class="mxinfo " id="T3:U97">3</span>)</span> = (<span class="mxinfo " id="T3:U98"><span class="mxinfo " id="T3:U99"><span class="mxinfo " id="T3:U100"><span class="mxinfo " id="T3:U101"><span class="mxinfo " id="T3:U102"><span class="mxinfo " id="T3:U103"><span class="var type1" id="S4T4U141">kC</span>.l1</span> + <span class="mxinfo " id="T3:U105"><span class="mxinfo " id="T3:U106"><span class="var type1" id="S4T4U145">kC</span>.l3</span>*<span class="mxinfo " id="T3:U108">sin(<span class="mxinfo " id="T3:U109">-<span class="var type1" id="S6T3U150">beta</span></span>)</span></span></span>-<span class="mxinfo " id="T3:U111"><span class="mxinfo " id="T3:U112"><span class="var type1" id="S4T4U153">kC</span>.l4</span>*<span class="mxinfo " id="T3:U114">sin(<span class="mxinfo " id="T3:U115"><span class="var type1" id="S4T4U158">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T3:U117"><span class="mxinfo " id="T3:U118"><span class="var type1" id="S4T4U162">kC</span>.l5</span>*<span class="mxinfo " id="T3:U120">sin(<span class="mxinfo " id="T3:U121"><span class="var type1" id="S7T3U167">gamma</span>+<span class="mxinfo " id="T3:U123"><span class="var type1" id="S4T4U169">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T3:U125"><span class="var type1" id="S4T4U172">kC</span>.l6</span></span>-(<span class="mxinfo " id="T3:U127"><span class="mxinfo " id="T3:U128"><span class="var type1" id="S4T4U177">kC</span>.l8</span>+<span class="mxinfo " id="T3:U130"><span class="var type1" id="S4T4U180">kC</span>.r</span></span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="6,27" id="srcline27">27</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="6,28" id="srcline28">28</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="6,29" id="srcline29">29</a></span><span class="line"></span></span>
</pre>
