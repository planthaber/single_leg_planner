%sherpaTTIKAcc.m
%author: wreid
%date: 20150123

function qDotDot = sherpaTTIKAcc(uDotDot,qDot,q,kinematicConst)
%sherpaTTFKAcc Sherpa_TT single leg forward acceleration kinematics.

    [~,L2,L3,L4,L5,~,L7,~,zeta,~,~,~,~,~,~,~] = extractKinematicConstants(kinematicConst);

    alpha = q(1);
    beta = q(2);
    gamma = q(3);
    
    alphaDot = qDot(1);
    betaDot = qDot(2);
    gammaDot = qDot(3);
    
    xDotDot = uDotDot(1);
    yDotDot = uDotDot(2);
    zDotDot = uDotDot(3);
    
    qDotDot = [((cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)*L5^2 - cos(beta)*sin(alpha)*sin(beta)*L3^2)*(conj(xDotDot) + conj(alphaDot)*sin(alpha)*(L2 - L7 + L5*cos(gamma + zeta) + L3*cos(beta) + L4*cos(zeta)) + L3*cos(alpha)*conj(betaDot)*sin(beta) + L5*sin(gamma + zeta)*cos(alpha)*conj(gammaDot)))/(L3^3*cos(beta)^2*sin(alpha)^2*sin(beta) - L5^3*cos(gamma + zeta)^2*sin(gamma + zeta)*sin(alpha)^2 + L2*L3^2*cos(beta)*sin(alpha)^2*sin(beta) - L3^2*L7*cos(beta)*sin(alpha)^2*sin(beta) - L3*L5^2*cos(gamma + zeta)^2*cos(alpha)^2*sin(beta) + L3^2*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)^2 - L2*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 + L5^2*L7*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 + L3^2*L4*cos(beta)*sin(alpha)^2*sin(beta)*cos(zeta) + L3*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*cos(alpha)^2*cos(beta) - L3*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*cos(beta)*sin(alpha)^2 - L3^2*L5*cos(gamma + zeta)*cos(alpha)^2*cos(beta)*sin(beta) - L4*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2*cos(zeta) + L3^2*L5*cos(gamma + zeta)*cos(beta)*sin(alpha)^2*sin(beta) - L2*L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) + L2*L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta) + L3*L5*L7*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*L7*sin(gamma + zeta)*cos(alpha)^2*cos(beta) - L3*L4*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta)*cos(zeta) + L3*L4*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)*cos(zeta)) - ((L3*L5*cos(gamma + zeta)*cos(alpha)*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)*cos(beta))*(conj(yDotDot) - conj(alphaDot)*cos(alpha)*(L2 - L7 + L5*cos(gamma + zeta) + L3*cos(beta) + L4*cos(zeta)) + L3*conj(betaDot)*sin(alpha)*sin(beta) + L5*cos(gamma + zeta)*conj(gammaDot)*sin(alpha)))/(L3^3*cos(beta)^2*sin(alpha)^2*sin(beta) - L5^3*cos(gamma + zeta)^2*sin(gamma + zeta)*sin(alpha)^2 + L2*L3^2*cos(beta)*sin(alpha)^2*sin(beta) - L3^2*L7*cos(beta)*sin(alpha)^2*sin(beta) - L3*L5^2*cos(gamma + zeta)^2*cos(alpha)^2*sin(beta) + L3^2*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)^2 - L2*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 + L5^2*L7*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 + L3^2*L4*cos(beta)*sin(alpha)^2*sin(beta)*cos(zeta) + L3*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*cos(alpha)^2*cos(beta) - L3*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*cos(beta)*sin(alpha)^2 - L3^2*L5*cos(gamma + zeta)*cos(alpha)^2*cos(beta)*sin(beta) - L4*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2*cos(zeta) + L3^2*L5*cos(gamma + zeta)*cos(beta)*sin(alpha)^2*sin(beta) - L2*L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) + L2*L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta) + L3*L5*L7*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*L7*sin(gamma + zeta)*cos(alpha)^2*cos(beta) - L3*L4*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta)*cos(zeta) + L3*L4*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)*cos(zeta)) - ((L5^2*sin(gamma + zeta)^2*cos(alpha)*sin(alpha) - L3^2*cos(alpha)*sin(alpha)*sin(beta)^2)*(conj(zDotDot) + L5*cos(gamma + zeta)*conj(gammaDot) + L3*conj(betaDot)*cos(beta)))/(L3^3*cos(beta)^2*sin(alpha)^2*sin(beta) - L5^3*cos(gamma + zeta)^2*sin(gamma + zeta)*sin(alpha)^2 + L2*L3^2*cos(beta)*sin(alpha)^2*sin(beta) - L3^2*L7*cos(beta)*sin(alpha)^2*sin(beta) - L3*L5^2*cos(gamma + zeta)^2*cos(alpha)^2*sin(beta) + L3^2*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)^2 - L2*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 + L5^2*L7*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 + L3^2*L4*cos(beta)*sin(alpha)^2*sin(beta)*cos(zeta) + L3*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*cos(alpha)^2*cos(beta) - L3*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*cos(beta)*sin(alpha)^2 - L3^2*L5*cos(gamma + zeta)*cos(alpha)^2*cos(beta)*sin(beta) - L4*L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2*cos(zeta) + L3^2*L5*cos(gamma + zeta)*cos(beta)*sin(alpha)^2*sin(beta) - L2*L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) + L2*L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta) + L3*L5*L7*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*L7*sin(gamma + zeta)*cos(alpha)^2*cos(beta) - L3*L4*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta)*cos(zeta) + L3*L4*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)*cos(zeta));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ((L5*sin(gamma + zeta)*cos(alpha)^2 + L3*sin(beta)*sin(alpha)^2)*(conj(zDotDot) + L5*cos(gamma + zeta)*conj(gammaDot) + L3*conj(betaDot)*cos(beta)))/(L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 - L3^2*cos(beta)*sin(alpha)^2*sin(beta) + L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)) - (L5*cos(gamma + zeta)*cos(alpha)*(conj(xDotDot) + conj(alphaDot)*sin(alpha)*(L2 - L7 + L5*cos(gamma + zeta) + L3*cos(beta) + L4*cos(zeta)) + L3*cos(alpha)*conj(betaDot)*sin(beta) + L5*sin(gamma + zeta)*cos(alpha)*conj(gammaDot)))/(L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 - L3^2*cos(beta)*sin(alpha)^2*sin(beta) + L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)) - (L5*cos(gamma + zeta)*sin(alpha)*(conj(yDotDot) - conj(alphaDot)*cos(alpha)*(L2 - L7 + L5*cos(gamma + zeta) + L3*cos(beta) + L4*cos(zeta)) + L3*conj(betaDot)*sin(alpha)*sin(beta) + L5*cos(gamma + zeta)*conj(gammaDot)*sin(alpha)))/(L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 - L3^2*cos(beta)*sin(alpha)^2*sin(beta) + L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           (L3*cos(alpha)*cos(beta)*(conj(xDotDot) + conj(alphaDot)*sin(alpha)*(L2 - L7 + L5*cos(gamma + zeta) + L3*cos(beta) + L4*cos(zeta)) + L3*cos(alpha)*conj(betaDot)*sin(beta) + L5*sin(gamma + zeta)*cos(alpha)*conj(gammaDot)))/(L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 - L3^2*cos(beta)*sin(alpha)^2*sin(beta) + L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)) - ((L3*sin(beta)*cos(alpha)^2 + L5*sin(gamma + zeta)*sin(alpha)^2)*(conj(zDotDot) + L5*cos(gamma + zeta)*conj(gammaDot) + L3*conj(betaDot)*cos(beta)))/(L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 - L3^2*cos(beta)*sin(alpha)^2*sin(beta) + L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta)) + (L3*cos(beta)*sin(alpha)*(conj(yDotDot) - conj(alphaDot)*cos(alpha)*(L2 - L7 + L5*cos(gamma + zeta) + L3*cos(beta) + L4*cos(zeta)) + L3*conj(betaDot)*sin(alpha)*sin(beta) + L5*cos(gamma + zeta)*conj(gammaDot)*sin(alpha)))/(L5^2*cos(gamma + zeta)*sin(gamma + zeta)*sin(alpha)^2 - L3^2*cos(beta)*sin(alpha)^2*sin(beta) + L3*L5*cos(gamma + zeta)*cos(alpha)^2*sin(beta) - L3*L5*sin(gamma + zeta)*cos(alpha)^2*cos(beta))];
 
      
end