<pre class="code">
<span class="srcline"><span class="lineno"><a href="93,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%SHERPATTFK Calcluates the Cartesian position of the wheel contact point</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%relative to the pan coordinate frame for the SherpaTT Leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%Inputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%-q: A 1x3 vector containing the joint angular positions [alpha beta gamma]</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%-kC: A struct containing the kinematic constants of the SherpaTT leg.</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%Outputs:</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%sherpaTTFK.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,10" id="srcline10">10</a></span><span class="line"><span class="comment">%author: wreid</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,11" id="srcline11">11</a></span><span class="line"><span class="comment">%date: 20150122</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="93,13" id="srcline13">13</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T45U3">u</span> = sherpaTTFK(<span class="var type1" id="S3T45U6">q</span>,<span class="var type1" id="S4T3U7">kC</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="93,14" id="srcline14">14</a></span><span class="line"><span class="comment">%sherpaTTFK Sherpa_TT Forward Kinematics</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,15" id="srcline15">15</a></span><span class="line"><span class="comment">%   Calculates the x,y,z position of the contact point given the alpha,</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,16" id="srcline16">16</a></span><span class="line"><span class="comment">%   beta and gamma joint values.</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="93,18" id="srcline18">18</a></span><span class="line">    <span class="mxinfo " id="T2:U4"><span class="var type1" id="S5T2U10">alpha</span> = <span class="mxinfo " id="T2:U6"><span class="var type1" id="S3T45U12">q</span>(<span class="mxinfo " id="T2:U8">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T2:U9"><span class="var type1" id="S6T2U16">beta</span> = <span class="mxinfo " id="T2:U11"><span class="var type1" id="S3T45U18">q</span>(<span class="mxinfo " id="T2:U13">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T2:U14"><span class="var type1" id="S7T2U22">gamma</span> = <span class="mxinfo " id="T2:U16"><span class="var type1" id="S3T45U24">q</span>(<span class="mxinfo " id="T2:U18">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,21" id="srcline21">21</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="93,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T45:U19"><span class="var type1" id="S2T45U28">u</span> = <span class="mxinfo " id="T45:U21">zeros(<span class="mxinfo " id="T2:U22">1</span>,<span class="mxinfo " id="T2:U23">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="93,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo " id="T2:U24"><span class="mxinfo " id="T2:U25"><span class="var type1" id="S2T45U36">u</span>(<span class="mxinfo " id="T2:U27">1</span>)</span> = <span class="mxinfo " id="T2:U28">(<span class="mxinfo " id="T2:U29"><span class="mxinfo " id="T2:U30"><span class="mxinfo " id="T2:U31"><span class="mxinfo " id="T2:U32"><span class="mxinfo " id="T2:U33"><span class="var type1" id="S4T3U45">kC</span>.l2</span> + <span class="mxinfo " id="T2:U35"><span class="mxinfo " id="T2:U36"><span class="var type1" id="S4T3U49">kC</span>.l3</span>*<span class="mxinfo " id="T2:U38">cos(<span class="mxinfo " id="T2:U39">-<span class="var type1" id="S6T2U54">beta</span></span>)</span></span></span>+<span class="mxinfo " id="T2:U41"><span class="mxinfo " id="T2:U42"><span class="var type1" id="S4T3U57">kC</span>.l4</span>*<span class="mxinfo " id="T2:U44">cos(<span class="mxinfo " id="T2:U45"><span class="var type1" id="S4T3U62">kC</span>.zeta</span>)</span></span></span>+<span class="mxinfo " id="T2:U47"><span class="mxinfo " id="T2:U48"><span class="var type1" id="S4T3U66">kC</span>.l5</span>*<span class="mxinfo " id="T2:U50">cos(<span class="mxinfo " id="T2:U51"><span class="var type1" id="S7T2U71">gamma</span>+<span class="mxinfo " id="T2:U53"><span class="var type1" id="S4T3U73">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T2:U55"><span class="var type1" id="S4T3U76">kC</span>.l7</span></span>).*<span class="mxinfo " id="T2:U57">cos(<span class="var type1" id="S5T2U80">alpha</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,25" id="srcline25">25</a></span><span class="line">    <span class="mxinfo " id="T2:U59"><span class="mxinfo " id="T2:U60"><span class="var type1" id="S2T45U84">u</span>(<span class="mxinfo " id="T2:U62">2</span>)</span> = <span class="mxinfo " id="T2:U63">(<span class="mxinfo " id="T2:U64"><span class="mxinfo " id="T2:U65"><span class="mxinfo " id="T2:U66"><span class="mxinfo " id="T2:U67"><span class="mxinfo " id="T2:U68"><span class="var type1" id="S4T3U93">kC</span>.l2</span> + <span class="mxinfo " id="T2:U70"><span class="mxinfo " id="T2:U71"><span class="var type1" id="S4T3U97">kC</span>.l3</span>*<span class="mxinfo " id="T2:U73">cos(<span class="mxinfo " id="T2:U74">-<span class="var type1" id="S6T2U102">beta</span></span>)</span></span></span>+<span class="mxinfo " id="T2:U76"><span class="mxinfo " id="T2:U77"><span class="var type1" id="S4T3U105">kC</span>.l4</span>*<span class="mxinfo " id="T2:U79">cos(<span class="mxinfo " id="T2:U80"><span class="var type1" id="S4T3U110">kC</span>.zeta</span>)</span></span></span>+<span class="mxinfo " id="T2:U82"><span class="mxinfo " id="T2:U83"><span class="var type1" id="S4T3U114">kC</span>.l5</span>*<span class="mxinfo " id="T2:U85">cos(<span class="mxinfo " id="T2:U86"><span class="var type1" id="S7T2U119">gamma</span>+<span class="mxinfo " id="T2:U88"><span class="var type1" id="S4T3U121">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T2:U90"><span class="var type1" id="S4T3U124">kC</span>.l7</span></span>).*<span class="mxinfo " id="T2:U92">sin(<span class="var type1" id="S5T2U128">alpha</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T2:U94"><span class="mxinfo " id="T2:U95"><span class="var type1" id="S2T45U132">u</span>(<span class="mxinfo " id="T2:U97">3</span>)</span> = (<span class="mxinfo " id="T2:U98"><span class="mxinfo " id="T2:U99"><span class="mxinfo " id="T2:U100"><span class="mxinfo " id="T2:U101"><span class="mxinfo " id="T2:U102"><span class="mxinfo " id="T2:U103"><span class="var type1" id="S4T3U141">kC</span>.l1</span> + <span class="mxinfo " id="T2:U105"><span class="mxinfo " id="T2:U106"><span class="var type1" id="S4T3U145">kC</span>.l3</span>*<span class="mxinfo " id="T2:U108">sin(<span class="mxinfo " id="T2:U109">-<span class="var type1" id="S6T2U150">beta</span></span>)</span></span></span>-<span class="mxinfo " id="T2:U111"><span class="mxinfo " id="T2:U112"><span class="var type1" id="S4T3U153">kC</span>.l4</span>*<span class="mxinfo " id="T2:U114">sin(<span class="mxinfo " id="T2:U115"><span class="var type1" id="S4T3U158">kC</span>.zeta</span>)</span></span></span>-<span class="mxinfo " id="T2:U117"><span class="mxinfo " id="T2:U118"><span class="var type1" id="S4T3U162">kC</span>.l5</span>*<span class="mxinfo " id="T2:U120">sin(<span class="mxinfo " id="T2:U121"><span class="var type1" id="S7T2U167">gamma</span>+<span class="mxinfo " id="T2:U123"><span class="var type1" id="S4T3U169">kC</span>.zeta</span></span>)</span></span></span>-<span class="mxinfo " id="T2:U125"><span class="var type1" id="S4T3U172">kC</span>.l6</span></span>-(<span class="mxinfo " id="T2:U127"><span class="mxinfo " id="T2:U128"><span class="var type1" id="S4T3U177">kC</span>.l8</span>+<span class="mxinfo " id="T2:U130"><span class="var type1" id="S4T3U180">kC</span>.r</span></span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="93,27" id="srcline27">27</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="93,28" id="srcline28">28</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="93,29" id="srcline29">29</a></span><span class="line"></span></span>
</pre>
