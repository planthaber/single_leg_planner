<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S55T62U324">pathC</span> = transformPath(<span class="var type1" id="S56T61U327">pathJ</span>,<span class="var type1" id="S57T3U328">kC</span>,<span class="var type1" id="S58T6U329">TP2B</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line">    <span class="mxinfo " id="T2:U5">[<span class="var type1" id="S59T2U333">pathH</span>,<span class="mxinfo " id="T2:U7"><span class="mxinfo " id="T2:U8">~</span></span>] = size(<span class="var type1" id="S56T61U337">pathJ</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line">    <span class="mxinfo " id="T62:U10"><span class="var type1" id="S55T62U340">pathC</span> = <span class="mxinfo " id="T62:U12">zeros(<span class="var type1" id="S59T2U343">pathH</span>,<span class="mxinfo " id="T2:U14">7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S62T2U347">i</span> = <span class="mxinfo " id="T2:U16">1</span>:<span class="var type1" id="S59T2U350">pathH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line">       <span class="mxinfo " id="T45:U18"><span class="var type1" id="S63T45U353">uP</span> = <span class="mxinfo " id="T45:U20"><span class="fcn" id="F238N24:B355">sherpaTTFK</span>(<span class="mxinfo " id="T45:U21"><span class="var type1" id="S56T61U357">pathJ</span>(<span class="var type1" id="S62T2U358">i</span>,<span class="mxinfo " id="T45:U24"><span class="mxinfo " id="T2:U25">2</span>:<span class="mxinfo " id="T2:U26">4</span></span>)</span>,<span class="var type1" id="S57T3U362">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line">       <span class="mxinfo " id="T8:U28"><span class="var type1" id="S65T8U365">uPDot</span> = <span class="mxinfo " id="T8:U30"><span class="fcn" id="F398N25:B367">sherpaTTFKVel</span>(<span class="mxinfo " id="T45:U31"><span class="var type1" id="S56T61U369">pathJ</span>(<span class="var type1" id="S62T2U370">i</span>,<span class="mxinfo " id="T45:U34"><span class="mxinfo " id="T2:U35">7</span>:<span class="mxinfo " id="T2:U36">9</span></span>)</span>,<span class="mxinfo " id="T45:U37"><span class="var type1" id="S56T61U375">pathJ</span>(<span class="var type1" id="S62T2U376">i</span>,<span class="mxinfo " id="T45:U40"><span class="mxinfo " id="T2:U41">2</span>:<span class="mxinfo " id="T2:U42">4</span></span>)</span>,<span class="var type1" id="S57T3U380">kC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line">       <span class="mxinfo " id="T8:U44"><span class="var type1" id="S67T8U383">uB</span> = <span class="mxinfo " id="T8:U46"><span class="mxinfo " id="T8:U47"><span class="mxinfo " id="T7:U48"><span class="var type1" id="S58T6U387">TP2B</span>(<span class="mxinfo " id="T45:U50"><span class="mxinfo " id="T2:U51">1</span>:<span class="mxinfo " id="T2:U52">3</span></span>,<span class="mxinfo " id="T45:U53"><span class="mxinfo " id="T2:U54">1</span>:<span class="mxinfo " id="T2:U55">3</span></span>)</span>*<span class="mxinfo " id="T8:U56"><span class="var type1" id="S63T45U395">uP</span>'</span></span> + <span class="mxinfo " id="T8:U58"><span class="var type1" id="S58T6U397">TP2B</span>(<span class="mxinfo " id="T45:U60"><span class="mxinfo " id="T2:U61">1</span>:<span class="mxinfo " id="T2:U62">3</span></span>,<span class="mxinfo " id="T2:U63">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line">       <span class="mxinfo " id="T8:U64"><span class="var type1" id="S68T8U404">uBDot</span> = <span class="mxinfo " id="T8:U66"><span class="mxinfo " id="T7:U67"><span class="var type1" id="S58T6U407">TP2B</span>(<span class="mxinfo " id="T45:U69"><span class="mxinfo " id="T2:U70">1</span>:<span class="mxinfo " id="T2:U71">3</span></span>,<span class="mxinfo " id="T45:U72"><span class="mxinfo " id="T2:U73">1</span>:<span class="mxinfo " id="T2:U74">3</span></span>)</span>*<span class="var type1" id="S65T8U414">uPDot</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line">       <span class="mxinfo " id="T79:U76"><span class="mxinfo " id="T79:U77"><span class="var type1" id="S55T62U418">pathC</span>(<span class="var type1" id="S62T2U419">i</span>,:)</span> = <span class="mxinfo " id="T79:U80">[<span class="mxinfo " id="T2:U81"><span class="var type1" id="S56T61U424">pathJ</span>(<span class="var type1" id="S62T2U425">i</span>,<span class="mxinfo " id="T2:U84">1</span>)</span> <span class="mxinfo " id="T45:U85"><span class="var type1" id="S67T8U428">uB</span>'</span> <span class="mxinfo " id="T45:U87"><span class="var type1" id="S68T8U430">uBDot</span>'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line"><span class="comment">% function [pathC,pathJ] = transformPath(pathOld,NODE_SIZE,kC,dt,Dt,TP2B)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line"><span class="comment">%     %Take the pathOld array and combine the general nodes and intermediate</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line"><span class="comment">%     %states into a uniform path. The output path should be a npx6 array</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line"><span class="comment">%     %that contains the n general nodes and the p intermediate nodes between</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line"><span class="comment">%     %general nodes. Each row in the path matrix contains </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line"><span class="comment">%     %[t,x,y,z,xDot,yDot,zDot] state data.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line"><span class="comment">%     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line"><span class="comment">%     [pathH,pathW] = size(pathOld);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line"><span class="comment">%     pathC = zeros(round(Dt/dt)*pathH,7);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line"><span class="comment">%     pathJ = zeros(round(Dt/dt)*pathH,10);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line"><span class="comment">%     count = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line"><span class="comment">%     time = round(Dt/dt)*pathH*dt;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line"><span class="comment">%     for i = 1:pathH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line"><span class="comment">%         for j = pathW:-6:NODE_SIZE+7</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line"><span class="comment">%             uP = sherpaTTFK(pathOld(i,j-5:j-3),kC);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line"><span class="comment">%             uB = TP2B(1:3,1:3)*uP' + TP2B(1:3,4);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line"><span class="comment">%             uDot = sherpaTTFKVel(pathOld(i,j-2:j)',pathOld(i,j-5:j-3)',kC);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line"><span class="comment">%             uBDot = TP2B(1:3,1:3)*uDot;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line"><span class="comment">%             pathC(count,:) = [time uB' uBDot'];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line"><span class="comment">%             pathJ(count,:) = [time pathOld(i,j-5:j) pathOld(i,10) pathOld(i,11)];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line"><span class="comment">%             time = time - dt;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line"><span class="comment">%             count = count + 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line"><span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line"><span class="comment">%     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line"><span class="comment">%     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line"><span class="comment">%     pathC = flipud(pathC(:,1:end));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line"><span class="comment">%     pathJ = flipud(pathJ(:,1:end));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line"><span class="comment">%     </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line"><span class="comment">% end</span></span></span>
</pre>
